(this["webpackJsonpproject-1"]=this["webpackJsonpproject-1"]||[]).push([[0],{125:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(82),c=n.n(r),i=(n(99),n(147)),s=n(136),o=n(137),j=n(138),u=n(2),d=function(e){return Object(u.jsx)(s.a,{marginX:"auto",width:"925px",children:e.children})},b=n(25),l=function(){return Object(u.jsx)(s.a,{bgColor:"#032541",p:15,color:"white",children:Object(u.jsx)(d,{children:Object(u.jsxs)(o.a,{height:"50px",alignItems:"center",fontSize:"xl",children:[Object(u.jsx)(s.a,{mr:45,children:Object(u.jsx)(b.b,{to:"/movies",children:"\u0424\u0438\u043b\u044c\u043c\u044b"})}),Object(u.jsx)(s.a,{mr:45,children:Object(u.jsx)(b.b,{to:"/favorites",children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0435"})}),Object(u.jsx)(j.a,{})]})})})},O=n(10),h=n(13),x=n.n(h),f=n(27),p=n(3),m=n(14),v=n(91),g=n(146),S=n(139),w=n(140),k=n(143),y=[{id:28,name:"\u0431\u043e\u0435\u0432\u0438\u043a"},{id:12,name:"\u043f\u0440\u0438\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f"},{id:16,name:"\u043c\u0443\u043b\u044c\u0442\u0444\u0438\u043b\u044c\u043c"},{id:35,name:"\u043a\u043e\u043c\u0435\u0434\u0438\u044f"},{id:80,name:"\u043a\u0440\u0438\u043c\u0438\u043d\u0430\u043b"},{id:99,name:"\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0439"},{id:18,name:"\u0434\u0440\u0430\u043c\u0430"},{id:10751,name:"\u0441\u0435\u043c\u0435\u0439\u043d\u044b\u0439"},{id:14,name:"\u0444\u044d\u043d\u0442\u0435\u0437\u0438"},{id:36,name:"\u0438\u0441\u0442\u043e\u0440\u0438\u044f"},{id:27,name:"\u0443\u0436\u0430\u0441\u044b"},{id:10402,name:"\u043c\u0443\u0437\u044b\u043a\u0430"},{id:9648,name:"\u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0432"},{id:10749,name:"\u043c\u0435\u043b\u043e\u0434\u0440\u0430\u043c\u0430"},{id:878,name:"\u0444\u0430\u043d\u0442\u0430\u0441\u0442\u0438\u043a\u0430"},{id:10770,name:"\u0442\u0435\u043b\u0435\u0432\u0438\u0437\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u043c"},{id:53,name:"\u0442\u0440\u0438\u043b\u043b\u0435\u0440"},{id:10752,name:"\u0432\u043e\u0435\u043d\u043d\u044b\u0439"},{id:37,name:"\u0432\u0435\u0441\u0442\u0435\u0440\u043d"}];var _=function(e){var t,n,r=e.isFromMoviePage,c=e.movie,i=c.title,j=c.poster_path,d=c.release_date,l=Object(v.a)(c,["title","poster_path","release_date"]),h=Object(O.g)(),x=Object(a.useState)(!0),f=Object(p.a)(x,2),_=f[0],z=f[1],C=Object(a.useState)(!0),M=Object(p.a)(C,2),I=M[0],P=M[1];l.genre_ids?(n=l.genre_ids,t=n.map((function(e){return{id:e,name:y.find((function(t){return t.id===e})).name}}))):t=l.genres;return _||r?Object(u.jsxs)(o.a,{direction:r?"row":"column",justifyContent:"space-between",children:[Object(u.jsx)(b.b,{to:"/movies/"+l.id,children:j?Object(u.jsx)(g.a,{src:"https://image.tmdb.org/t/p/w220_and_h330_face"+j,width:"220px",rounded:"lg",boxShadow:"2xl"}):Object(u.jsx)(S.a,{width:220,height:330,children:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u043d\u0435\u0442"})}),Object(u.jsxs)(o.a,{maxWidth:690,height:!r&&"100%",direction:"column",justifyContent:"space-between",children:[Object(u.jsxs)(s.a,{margin:2,children:[Object(u.jsx)(w.a,{fontSize:r?"xl":"md",fontWeight:"bold",children:i}),Object(u.jsx)(w.a,{fontSize:"xs",children:t.map((function(e,n){return e.name+(n!==t.length-1?", ":"")}))}),Object(u.jsx)(w.a,{fontSize:"xs",children:d}),r&&Object(u.jsx)(w.a,{children:l.overview})]}),Object(u.jsx)(S.a,{mt:"auto",mr:r&&"auto",children:"/favorites"===h.pathname?Object(u.jsx)(k.a,{onClick:function(){var e=[];localStorage.getItem("favorites")&&(e=JSON.parse(localStorage.getItem("favorites")));var t=e.filter((function(e){return e.id!==l.id}));z(!1),localStorage.setItem("favorites",JSON.stringify(t))},size:"sm",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}):I?Object(u.jsx)(k.a,{onClick:function(){var e=[];localStorage.getItem("favorites")&&(e=JSON.parse(localStorage.getItem("favorites"))),e.find((function(e){return e.id===l.id}))||localStorage.setItem("favorites",JSON.stringify([].concat(Object(m.a)(e),[{id:l.id,title:i,poster_path:j,genres:t,release_date:d}]))),P(!1)},size:"sm",children:"\u0412 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0435"}):Object(u.jsx)(w.a,{height:"32px",fontSize:"sm",children:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0435"})})]})]}):null},z=function(e){var t=e.movies;return Object(u.jsx)(i.a,{my:15,templateColumns:"repeat(4, 220px)",gap:"15px",children:t.map((function(e){return Object(u.jsx)(_,{movie:e},e.id)}))})},C=function(e){for(var t=e.totalPages,n=e.page,r=e.setPage,c=Object(a.useState)(Math.ceil(n/10)-1),i=Object(p.a)(c,2),s=i[0],o=i[1],j=[],d=[],b=1;b<=t;b++)d.push(b),b%10!==0&&b!==t||(j.push(d),d=[]);var l=Object(a.useState)(0!==s),O=Object(p.a)(l,2),h=O[0],x=O[1],f=Object(a.useState)(s!==j.length-1),m=Object(p.a)(f,2),v=m[0],g=m[1];return 0===t?null:Object(u.jsxs)(S.a,{children:[Object(u.jsx)(k.a,{width:30,mr:1,size:"xs",onClick:function(){o(s-1),s-1===0?x(!1):v||g(!0)},disabled:!h,children:"<"}),j[s].map((function(e){return Object(u.jsx)(k.a,{width:30,mr:1,size:"xs",onClick:function(){return r(e)},fontWeight:e===n&&"bold",children:e},e)})),Object(u.jsx)(k.a,{width:30,size:"xs",onClick:function(){o(s+1),s+1===j.length-1?g(!1):h||x(!0)},disabled:!v,children:">"})]})},M=n(42),I=n(84),P=n(85),J=n(86),E=n.n(J).a.create({baseURL:"https://api.themoviedb.org/3/"}),N={api_key:"9513ed8e703d28f1add7f2b34deac434",language:"ru",region:"ru"},F=function(){function e(){Object(I.a)(this,e)}return Object(P.a)(e,null,[{key:"getMovies",value:function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get("movie/popular",{params:Object(M.a)(Object(M.a)({},N),{},{page:t})});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMovie",value:function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get("movie/"+t,{params:N});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecommendMovie",value:function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get("movie/"+t+"/recommendations",{params:N});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSearchedMovies",value:function(){var e=Object(f.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get("search/movie",{params:Object(M.a)(Object(M.a)({},N),{},{query:t,page:n})});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),R=n(145),W=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(1),s=Object(p.a)(c,2),o=s[0],j=s[1],b=Object(a.useState)(0),l=Object(p.a)(b,2),O=l[0],h=l[1],m=Object(a.useState)(!0),v=Object(p.a)(m,2),g=v[0],w=v[1],k=Object(a.useState)(""),y=Object(p.a)(k,2),_=y[0],M=y[1];function I(){return(I=Object(f.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(!0),!_){e.next=7;break}return e.next=4,F.getSearchedMovies(_,o);case 4:t=e.sent,e.next=10;break;case 7:return e.next=9,F.getMovies(o);case 9:t=e.sent;case 10:h(t.total_pages),r(t.results),w(!1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){I.apply(this,arguments)}()}),[o,_]),Object(u.jsx)(d,{children:Object(u.jsxs)(i.a,{gap:15,children:[Object(u.jsx)(S.a,{children:Object(u.jsx)(R.a,{value:_,onChange:function(e){return M(e.target.value)},type:"text",w:"300px",fontSize:"xl"})}),g?Object(u.jsx)("div",{children:"loading"}):Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{totalPages:O,page:o,setPage:j}),Object(u.jsx)(z,{movies:n}),Object(u.jsx)(C,{totalPages:O,page:o,setPage:j})]})]})})},q=function(){var e=Object(O.h)().id,t=Object(a.useState)(!0),n=Object(p.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(null),s=Object(p.a)(i,2),j=s[0],d=s[1],b=Object(a.useState)(null),l=Object(p.a)(b,2),h=l[0],m=l[1],v=function(){var t=Object(f.a)(x.a.mark((function t(){var n,a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.next=3,F.getMovie(e);case 3:return n=t.sent,t.next=6,F.getRecommendMovie(e);case 6:a=t.sent,d(n),m(a.results),c(!1);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)(v,[e]),Object(u.jsx)("div",{children:r?Object(u.jsx)("div",{children:"loading"}):Object(u.jsxs)(o.a,{direction:"column",children:[Object(u.jsx)(_,{isFromMoviePage:!0,movie:j}),Object(u.jsx)(w.a,{mt:35,fontWeight:"bold",textAlign:"center",fontSize:20,children:"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438"}),Object(u.jsx)(z,{movies:h})]})})},A=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e;console.log("EFFECT"),localStorage.getItem("favorites")&&(e=JSON.parse(localStorage.getItem("favorites")),r(e))}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0435"}),Object(u.jsx)(z,{movies:n})]})},B=function(){return Object(u.jsx)(d,{children:Object(u.jsxs)(O.d,{children:[Object(u.jsx)(O.b,{exact:!0,path:"/movies",children:Object(u.jsx)(W,{})}),Object(u.jsx)(O.b,{path:"/favorites",children:Object(u.jsx)(A,{})}),Object(u.jsx)(O.b,{exact:!0,path:"/movies/:id",children:Object(u.jsx)(q,{})}),Object(u.jsx)(O.a,{to:"/movies"})]})})},L=function(){return Object(u.jsxs)(i.a,{templateRows:"80px 1fr",gap:"15px",mb:"15px",children:[Object(u.jsx)(l,{}),Object(u.jsx)(B,{})]})},T=n(144);c.a.render(Object(u.jsx)(b.a,{children:Object(u.jsx)(T.a,{children:Object(u.jsx)(L,{})})}),document.getElementById("root"))},99:function(e,t,n){}},[[125,1,2]]]);
//# sourceMappingURL=main.1733dc16.chunk.js.map